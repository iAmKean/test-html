import{G as z,s as M,e as F,z as R,d as S,A as D,g as G,K as N,o as T,c as C,a8 as O,a9 as j,W as q,a as i,r as b,l as Y,q as H,ad as P,p as L,H as K,n as W,t as Z,V as $,h as E,u as X,v as V,b as Q,at as ee,au as te,a2 as oe}from"./index-0d29c91c.js";/* empty css                                                               */import{_ as se}from"./ico-eye-db670207.js";import U from"https://esm.run/jwt-decode";import{u as ne}from"./bookingTransactionID-1d897d48.js";const ae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAABHNCSVQICAgIfAhkiAAAAq5JREFUOE9jZMACON2qZXkFLFMZlWxD/v9nUGJkZGT/z/D/JyMD473fDw+s/v7g5Kzvx1ufomtlRBHQ0mIT0u+ZxSpnE8cA1InNIqjY/58PD83/cKs+g+Hs2d8wdXAN3Irm4jxhu3cyMP7XZ8BrDpIV//9d+LLK3ePr/ZMvQaIQw4AukvA7cfo/A4MeNtcAvcogL8TAoCbKyPAN6I5br/4zvPkKUfn/P+O5V3scLEAuBBsmFLl1Hqu8bSI2gzhY/jMsTeBksFZmhUvvvP6TIX7RLzj/54NDcz+s8Elh5LSsluazL38MdyWaiS0+rAwp1hwoojuv/wIa9hNZ7P/nw30yjEKRWxpZ5e3qcHnvcSsPAxszJDRWnv3FsPzsT4Y3XxgY7rxG1fH3/oEmRvHyj9cZGBk1sBn27x8Dw6tOHrijRcs/MTAz4Yjkf/+uMIpVfPoBlGbHahgw4F918MKlxCo+M+Ayi4Hh33dG8YpPQC2owESOkcFehYUBJFHqygFPKF27f4DZJx/8ZThyD+hsNAAy7AdQDMVlGbYsDA1enNgcCxbrBBravw+eVqHqwC77eBWY3LSQdRIyLHXZV4bNlzFcdolRKGxtE6uSay2yYdL8DAxKIkwM/4D+XJvKDZcKnv0VHGbnn/xj+IKSMhgYft852MzI6QRMZ2bY0xkkNomKgH9fTjRLg+NZIGrrHHY522T0QCLWsD+PDs94u8w7E5JojI1ZxZz2HmdkZjJGNhDkTUJJg/H/v3MvOgPMGRgO/IGnQB5lKzGekG3b/zMyGcEMJOiy/39Pv1zo583w4jA4P6AlZwcWwaiSqWxydqkgOTyG/f/16MDs98v6skEuglmONW9wOzRIsIvoZjErOQe+6uRXBioGJbrvouWfb/94sHv9/9Nnp3+93wYuw5ABAMK2BR+83k9aAAAAAElFTkSuQmCC";const ie=i("div",{class:"text-center py-[14.5px] font-roboto"},[i("span",{class:"xs:hidden"}," Continue with Facebook ")],-1),re=i("img",{src:ae,alt:"facebook-icon",class:"absolute top-3 left-4 xs:py-[14.5px] xs:relative xs:top-0 xs:left-0"},null,-1),le=[ie,re],ce={__name:"FacebookAuth",setup(k){const v=z.FB_APP_ID,f=M(),c=F(),m=R(),l=S(),r=D("$cookies");var n=null,o=null;const p=()=>{o&&clearTimeout(o),n&&(o=setTimeout(()=>{m.push(n),n=null},5e3))};G(()=>c.alertModal.state,t=>{!t&&n&&(o=null,m.push(n),n=null)});const A=async()=>{FB.getLoginStatus(function(t){if(t.status==="connected"){var e={userId:t.authResponse.userID,accessToken:t.authResponse.accessToken};FB.api("/me?fields=first_name,middle_name,last_name,email",function(s){s.email?x(e,s):y()})}else y()})},y=()=>{FB.login(function(t){if(t.authResponse&&t.status==="connected"){var e={userId:t.authResponse.userID,accessToken:t.authResponse.accessToken};FB.api("/me?fields=first_name,middle_name,last_name,email",function(s){s.email?x(e,s):c.alertModal={state:!0,content:"You don't have a registered email in your Facebook account. Please set it up first."}})}else console.log("Did not fully authorize.")},{scope:"email",return_scopes:!0,auth_type:"rerequest",fallback_redirect_uri:window.location.origin+"/facebook-signin"})},x=async(t,e)=>{var s=O(t.userId,t.accessToken),g=await j("facebook",s),B={type:"facebook",token:s};g.status==200?(f.login(r,B),l.name==="BaseRoute::login"&&(l.query.redirect?n={path:l.query.redirect}:n={name:"BaseRoute::home"},p()),c.alertModal={state:!0,icon:"confirmation",content:"You have successfully logged in using your Facebook account."}):g.status==404?(console.log("Social email not in registered. Registering new user..."),_(e,B)):c.alertModal={state:!0,content:g.data.message}},_=async(t,e)=>{var s={first_name:t.first_name,middle_name:t.middle_name??null,last_name:t.last_name,driver:e.type,token:e.token,terms:!0,email_optin:!0},g=await q(s);g.status==201?(f.login(r,e),l.name==="BaseRoute::login"&&(l.query.redirect?n={path:l.query.redirect}:n={name:"BaseRoute::home"},p()),c.alertModal={state:!0,icon:"confirmation",content:"You have successfully logged in using your Facebook account."}):c.alertModal={state:!0,content:g.data.message}},a=async()=>{FB.init({appId:v,cookie:!0,version:"v17.0"})};return N(async()=>{await a()}),(t,e)=>(T(),C("div",{class:"border rounded-md relative cursor-pointer xs:flex xs:items-center xs:justify-center",onClick:A},le))}},J="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABHNCSVQICAgIfAhkiAAAAiZJREFUOE+tVM9rE0EUfm/XoT8I2iIWRSiLgifBBRvsRVyrPRaioNBTG+gf4MWD2EM9+Af0LzA9FW3pzVOjmd6EFEzx6iGlgjQ9mJBW02x2nm8mu3GzbKSHPlg2+828b773vTdBSImjx1MeES7wksOPF26p8LuCSGtXirsymYZx4Kc37dh28C6WnHaOxmQQ2Plr8ks12tAjqs1mXVBQ4oWxQdl9OMHOxOdypBYMUajkawrJHgFWEajOay4/d0KyPRH43risaNyEIarNZCX/ehA7scFe5JJeGO8Urgjl5+IkhsjfvuC1v10u/S5eBzq1NdYAC7yJ7bI298yB7aIosKyFoDYCJ5s3IKiLPNdeODNDVJr/SUigblnqj30wNNeaTJLMvD2WxEYNIkeCNfSL4t8GhB3xyO91IkpkooEk3T305pyIYBXjpZ2SfZiZbV1NK60PI5417I1CV1Fk9vfORXjZvAeHneF8eX7rv2ZzqYucrW9AFHnT/o/tydLq8W1oktALdbSsh+XnG6nt91Z+jVlC6OF1Ihbl++NmIKfWn/JAYnwg60D4ZHd+U8ZLyn545o4eLL+3WzdvRThxx0rLmUVDNL2eczpoawWXEv5orBpiWoGLwSgMHy2BOLmr4YaybFe+GuFrFIY+jZTSCpJkCe7up2je/zFUW5qTrzPGgr6/EaMMrEKizDSiffYxF/exjyiuDgL1goAcJtW3Xqvc5wlmxSTTuvoX283Xx0r0NsUAAAAASUVORK5CYII=",ue=["id"],de=i("div",{class:"text-center py-[14.5px] font-roboto xs:hidden"}," Continue with Google ",-1),me=i("img",{src:J,alt:"google-icon",class:"absolute top-3 left-4 xs:py-[14.5px] xs:relative xs:top-0 xs:left-0 z-0"},null,-1),ge={__name:"GoogleAuth",props:{googleElementID:{type:String,default:"web"}},setup(k){const v=k,f=z.GOOGLE_CLIENT_ID,c=M(),m=F(),l=R(),r=S(),n=D("$cookies");var o=null,p=null;const A=()=>{p&&clearTimeout(p),o&&(p=setTimeout(()=>{l.push(o),o=null},5e3))};G(()=>m.alertModal.state,u=>{!u&&o&&(p=null,l.push(o),o=null)});const y=u=>{const d=U(u.credential);x(u.credential,d)},x=async(u,d)=>{var w=O(d.sub,u),h=await j("google",w),I={type:"google",token:w};h.status==200?(c.login(n,I),r.name==="BaseRoute::login"&&(r.query.redirect?o={path:r.query.redirect}:o={name:"BaseRoute::home"},A()),m.alertModal={state:!0,icon:"confirmation",content:"You have successfully logged in using your Google account."}):h.status==404?(console.log("Social email not in registered. Registering new user..."),_(d,I)):m.alertModal={state:!0,content:h.data.message}},_=async(u,d)=>{var w={first_name:u.given_name,last_name:u.family_name,driver:d.type,token:d.token,terms:!0,email_optin:!0},h=await q(w);h.status==201?(c.login(n,d),r.name==="BaseRoute::login"&&(r.query.redirect?o={path:r.query.redirect}:o={name:"BaseRoute::home"},A()),m.alertModal={state:!0,icon:"confirmation",content:"You have successfully logged in using your Google account."}):m.alertModal={state:!0,content:h.data.message}},a=()=>{v.googleElementID&&(google.accounts.id.initialize({client_id:f,callback:y}),google.accounts.id.renderButton(document.getElementById(v.googleElementID+"-google-btn"),{theme:"outline",width:273}))},t=b(null),e=()=>{if(!t.value)return;t.value.querySelector("iframe")!==null||setTimeout(()=>{a()},1500)},s=b(null),g=()=>{s.value&&clearTimeout(s.value),s.value=setTimeout(()=>{e()},500)},B=()=>window.innerWidth<1024;return Y(()=>{a(),window.addEventListener("resize",g),B()&&setTimeout(()=>{e()},1e3)}),N(()=>{window.removeEventListener("resize",g)}),(u,d)=>(T(),C("div",{ref_key:"componentContainer",ref:t,class:"border rounded-md relative cursor-pointer xs:flex xs:items-center xs:justify-center",onClick:d[0]||(d[0]=H(()=>{},["prevent"]))},[i("div",{id:k.googleElementID+"-google-btn",class:"absolute opacity-0 h-full w-full top-0 right-0 z-10"},null,8,ue),de,me],512))}},pe=["id"],fe=i("div",{class:"text-center py-[14.5px] font-roboto xs:hidden"}," Continue with Google ",-1),ve=i("img",{src:J,alt:"google-icon",class:"absolute top-3 left-4 xs:py-[14.5px] xs:relative xs:top-0 xs:left-0 z-0"},null,-1),he={__name:"GoogleAuthMobile",props:{googleElementID:{type:String,default:"web"}},setup(k){const v=k,f=z.GOOGLE_CLIENT_ID,c=M(),m=F(),l=R(),r=S(),n=D("$cookies");var o=null,p=null;const A=()=>{p&&clearTimeout(p),o&&(p=setTimeout(()=>{l.push(o),o=null},5e3))};G(()=>m.alertModal.state,u=>{!u&&o&&(p=null,l.push(o),o=null)});const y=u=>{const d=U(u.credential);x(u.credential,d)},x=async(u,d)=>{var w=O(d.sub,u),h=await j("google",w),I={type:"google",token:w};h.status==200?(c.login(n,I),r.name==="BaseRoute::login"&&(r.query.redirect?o={path:r.query.redirect}:o={name:"BaseRoute::home"},A()),m.alertModal={state:!0,icon:"confirmation",content:"You have successfully logged in using your Google account."}):h.status==404?(console.log("Social email not in registered. Registering new user..."),_(d,I)):m.alertModal={state:!0,content:h.data.message}},_=async(u,d)=>{var w={first_name:u.given_name,last_name:u.family_name,driver:d.type,token:d.token,terms:!0,email_optin:!0},h=await q(w);h.status==201?(c.login(n,d),r.name==="BaseRoute::login"&&(r.query.redirect?o={path:r.query.redirect}:o={name:"BaseRoute::home"},A()),m.alertModal={state:!0,icon:"confirmation",content:"You have successfully logged in using your Google account."}):m.alertModal={state:!0,content:h.data.message}},a=()=>{v.googleElementID&&(google.accounts.id.initialize({client_id:f,callback:y}),google.accounts.id.renderButton(document.getElementById(v.googleElementID+"-google-btn"),{theme:"outline",width:273}))},t=b(null),e=()=>{if(!t.value)return;t.value.querySelector("iframe")!==null||setTimeout(()=>{a()},1500)},s=b(null),g=()=>{s.value&&clearTimeout(s.value),s.value=setTimeout(()=>{e()},500)},B=()=>window.innerWidth<1024;return Y(()=>{console.log("onMounted GoogleAuthMobile",v.googleElementID),a(),window.addEventListener("resize",g),B()&&setTimeout(()=>{e()},1e3)}),N(()=>{console.log("onBeforeMount GoogleAuthMobile",v.googleElementID),window.removeEventListener("resize",g)}),(u,d)=>(T(),C("div",{ref_key:"componentContainer",ref:t,class:"border rounded-md relative cursor-pointer xs:flex xs:items-center xs:justify-center"},[i("div",{id:k.googleElementID+"-google-btn",class:"absolute opacity-0 h-full w-full top-0 right-0 z-10"},null,8,pe),fe,ve],512))}},Ae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABHNCSVQICAgIfAhkiAAAALhJREFUOE/dlOEOQEAIx3kyPvBanPdieDH0t6uldTfno7Y2rvpdpdRVmTTRfbdhdQFnJd+WNJBOX0FjBCAesM8ZnTEDFwJbqjRkANni7XjHM0Asj/IsCM1EgBULYbtkqEEpiMOVIxd0ZEr1YB0dLmzQGXFDcxlo26Mt/wIFqlNGQJfGK/C2R/DrSWc8aJBegxLYzbADWfrlpLy3k53KUOK9XRt0EzM1ylR7pXEc1gWOG6n+ZdhllnsuoGwjE3SAEDIAAAAASUVORK5CYII=",ye=i("div",{class:"text-center py-[14.5px] font-roboto xs:hidden"}," Continue with Apple ",-1),xe=i("img",{src:Ae,alt:"apple-icon",class:"absolute top-3 left-4 xs:py-[14.5px] xs:relative xs:top-0 xs:left-0"},null,-1),_e=[ye,xe],we={__name:"AppleAuth",setup(k){const v=z.APPLE_CLIENT_ID,f=M(),c=F(),m=R(),l=S(),r=D("$cookies");var n=null,o=null;const p=()=>{o&&clearTimeout(o),n&&(o=setTimeout(()=>{m.push(n),n=null},5e3))};G(()=>c.alertModal.state,a=>{!a&&n&&(o=null,m.push(n),n=null)});const A=async()=>{try{const a=await AppleID.auth.signIn(),t=a.authorization.id_token,e=JSON.parse(y(t.split(".")[1]));x({sub:e.sub,id_token:a.authorization.id_token,code:a.authorization.code},a.user)}catch(a){console.log(a.error)}},y=a=>{const t=P.enc.Base64.parse(a);return P.enc.Utf8.stringify(t)},x=async(a,t)=>{var e=O(a.sub,a.id_token),s=await j("apple",e,{code:a.code,redirect:window.location.origin+"/apple-signin"}),g={type:"apple",token:e};s.status==200?(f.login(r,g),l.name==="BaseRoute::login"&&(l.query.redirect?n={path:l.query.redirect}:n={name:"BaseRoute::home"},p()),c.alertModal={state:!0,icon:"confirmation",content:"You have successfully logged in using your Apple account."}):s.status==404?(console.log("Social email not in registered. Registering new user..."),_(a,t,g)):c.alertModal={state:!0,content:s.data.message}},_=async(a,t,e)=>{if(!t){c.alertModal={state:!0,content:"An error occurred. Try reauthorizing us in your Apple account by removing Hotel101 in your sign in apps, then try signing in here again."};return}var s={first_name:t.name.firstName,last_name:t.name.lastName,driver:e.type,token:e.token,terms:!0,email_optin:!0,code:a.code,redirect:window.location.origin+"/apple-signin"},g=await q(s,a.code);g.status==201?(f.login(r,e),l.name==="BaseRoute::login"&&(l.query.redirect?n={path:l.query.redirect}:n={name:"BaseRoute::home"},p()),c.alertModal={state:!0,icon:"confirmation",content:"You have successfully logged in using your Apple account."}):c.alertModal={state:!0,content:g.data.message}};return Y(()=>{AppleID.auth.init({clientId:v,scope:"name email",redirectURI:window.location.origin+"/apple-signin",usePopup:!0})}),(a,t)=>(T(),C("div",{class:"border rounded-md relative cursor-pointer xs:flex xs:items-center xs:justify-center",onClick:A},_e))}};const be={class:"flex-1 px-[17px] py-8 flex flex-col gap-4 md:p-0"},ke={class:"flex flex-col"},Be=i("label",{class:"text-sm leading-4 font-medium",for:"email"},"Email",-1),Ie={class:"text-sm text-red-600"},Ee={class:"flex flex-col"},Me=i("label",{class:"text-sm leading-4 font-medium",for:"password"},"Password",-1),Re={class:"relative"},Se=["type"],De={class:"flex absolute top-[20px] right-[25px]"},Te={class:"text-sm text-red-600"},Ce=i("button",{type:"submit",class:"w-full btn-primary py-3 rounded-md text-14-16"}," Continue with Email ",-1),Le={class:"flex justify-end"},ze=i("div",{class:"divider my-0"},"OR",-1),Fe={class:"flex flex-col gap-4 text-[#0000008A] text-sm leading-3"},Ge={class:"text-14-16 text-center"},Pe={__name:"Auth",setup(k){ne();const v=M(),f=R(),c=S(),m=D("$cookies"),l=b(!1),r=b(""),n=b(""),o=b({email:null,password:null}),p=async()=>{var t=ee({email:r.value,password:n.value});if(Object.keys(t).length===0){y();var e=await te(r.value,n.value);if(e.status==200){var s=oe(r.value,n.value);v.login(m,s),c.name==="BaseRoute::login"&&(c.query.redirect?f.push({path:c.query.redirect}):f.push({name:"BaseRoute::home"}))}else if(e.data.errors){if(e.data.errors.email.length&&e.data.errors.email.includes("This email has not been verified.")){f.push({name:"BaseRoute::resendVerification",query:{email:r.value}});return}A(e.data.errors)}}else y(),A(t)},A=t=>{for(const e in t)o.value[e]=t[e][0]},y=()=>{o.value={email:null,password:null}},x=t=>{f.push({name:t});const e=document.querySelector("#sign-up-popup");e==null||e.blur()},_=b(!0),a=()=>{_.value=window.innerWidth<1024};return a(),Y(()=>{window.addEventListener("resize",a)}),N(()=>{window.removeEventListener("resize",a)}),(t,e)=>(T(),C("div",be,[i("form",{onSubmit:e[3]||(e[3]=H(s=>p(),["prevent"])),class:"flex-1 flex flex-col gap-4"},[i("div",ke,[Be,L(i("input",{type:"text",name:"email",placeholder:"Enter your email",class:W(["mt-1 border border-[#D2D2D2] focus-visible:outline-[#046A38] py-[10px] px-[15px] rounded-md text-base xs:w-full",{"border-red-500":o.value.email}]),"onUpdate:modelValue":e[0]||(e[0]=s=>r.value=s)},null,2),[[K,r.value]]),i("p",Ie,Z(o.value.email),1)]),i("div",Ee,[Me,i("div",Re,[L(i("input",{type:l.value?"text":"password",name:"password",placeholder:"Enter your password",autocomplete:"on",class:W(["mt-1 border border-[#D2D2D2] focus-visible:outline-[#046A38] py-[10px] px-[15px] rounded-md text-base  w-full xs:w-full pr-12",{"border-red-500":o.value.password}]),"onUpdate:modelValue":e[1]||(e[1]=s=>n.value=s)},null,10,Se),[[$,n.value]]),i("div",De,[E(X(se),{onClick:e[2]||(e[2]=s=>l.value=!l.value),active:l.value},null,8,["active"])])]),i("p",Te,Z(o.value.password),1)]),Ce],32),i("div",Le,[i("div",{class:"text-primary text-14-16 font-medium cursor-pointer",onClick:e[4]||(e[4]=s=>x("BaseRoute::forgotPassword"))}," Forgot your password? ")]),ze,i("div",Fe,[L(E(he,{googleElementID:"mobile",class:"md:bg-white"},null,512),[[V,_.value]]),L(E(ge,{googleElementID:"web",class:"md:bg-white"},null,512),[[V,!_.value]]),E(ce,{class:"md:bg-white"}),E(we,{class:"md:bg-white"})]),i("div",Ge,[Q(" Don't have an account? "),i("span",{class:"text-primary cursor-pointer font-medium",onClick:e[5]||(e[5]=s=>x("BaseRoute::signUp"))},"Sign Up")])]))}};export{Pe as default};
