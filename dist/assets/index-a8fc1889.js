import{B as Me,e as Ze,s as He,f as Qe,E as B,r as f,g as Z,l as Se,o as n,c as i,a as t,u as e,t as u,F as _e,k as he,i as Ue,C as L,n as c,b as W,h as _,p as K,v as ce,H as Xe,y as ge,_ as et,L as tt,z as qe,G as st,M as Le,j as Re}from"./index-0d29c91c.js";import{b as Ge,c as Ee,d as ot,e as at}from"./booking-84804f94.js";import{f as re,a as Ne}from"./dateHelper-f75861f0.js";import{_ as lt}from"./AppBreadcrumbs-734e5808.js";import{c as De,a as Be,e as nt,s as it,u as dt,v as Fe}from"./AppLoader.vue_vue_type_style_index_0_lang-2e650906.js";import{_ as ct}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                                                               */import{f as ae}from"./numberHelper-25d49756.js";import{_ as rt,s as ut,a as mt,b as pt,c as _t,d as Ie,e as ht,t as je,f as Ve,g as Oe}from"./BookingSummary-2ea2a3f4.js";import{A as vt}from"./AppAreaCodePopup-082382bb.js";import{_ as ft}from"./countries-d3044a4a.js";import{a as yt,b as xt}from"./index.css_vue_type_style_index_0_src_true_lang-6697b8bd.js";import{_ as de}from"./ico-chevron-f2223c49.js";import{_ as ze}from"./ico-profile-active-4985d5a2.js";import{T as gt,G as bt,_ as $e,a as Ae,b as wt,c as kt,V as Rt,l as $t}from"./stripe.esm-2907d9e2.js";import{n as At}from"./vouchers-0dc779af.js";import{u as Ct}from"./bookingTransactionID-1d897d48.js";import Ce from"./AppModal-b27e53ae.js";import{_ as Pe}from"./icn-intruction-cc70d524.js";import{f as Pt}from"./loyalty-181b1cf0.js";import"./axiosConfig-15342d77.js";import"./ico-search-65e72bb8.js";import"./AppLoader-c0c74b58.js";import"./main-044273c3.js";import"./voucherUnlocked-13825305.js";const Dt={class:"bg-white text-[#000000DE] md:bg-[#F6F6F6]"},Mt=["src"],St={class:"flex flex-col mt-2"},Tt={class:"leading-6 text-[24px]"},Lt={class:"font-bold leading-4 text-[10px]"},Gt={class:"mt-4 flex items-center gap-4 text-[12px] leading-4 xs:block"},Et={class:""},Nt={class:"flex items-center gap-1 xs:mt-1"},Bt={class:"text-[#046A38]"},Ft={key:0,class:"text-base text-danger font-bold"},It={key:0},jt={key:1},Vt={key:1,class:"text-base text-danger font-bold"},Ot={key:0},Zt={class:"mt-1 text-[12px] leading-4 flex items-center gap-1"},Ht=ge('<svg id="ico-coins" xmlns="http://www.w3.org/2000/svg" width="10.49" height="10.49" viewBox="0 0 10.488 10.488"><g id="Group_13401" data-name="Group 13401"><g id="Path_7457" data-name="Path 7457"><path id="Path_7458" data-name="Path 7458" d="M5.244,10.488a5.244,5.244,0,1,1,5.244-5.244A5.25,5.25,0,0,1,5.244,10.488ZM5.244,1A4.244,4.244,0,1,0,9.488,5.244,4.249,4.249,0,0,0,5.244,1Z" fill="#fa9b1d"></path></g></g><g id="Group_13402" data-name="Group 13402"><path id="Path_7459" data-name="Path 7459" d="M7.141,8.34a.493.493,0,0,1-.233-.058L5.244,7.407l-1.663.875a.494.494,0,0,1-.527-.038.5.5,0,0,1-.2-.489L3.173,5.9,1.826,4.59A.5.5,0,0,1,2.1,3.738l1.86-.271L4.8,1.782a.519.519,0,0,1,.9,0l.832,1.685,1.861.271a.5.5,0,0,1,.276.852L7.315,5.9l.319,1.853a.5.5,0,0,1-.493.585Zm-1.9-2a.5.5,0,0,1,.233.057l1,.526L6.285,5.813A.5.5,0,0,1,6.43,5.37l.808-.788L6.12,4.419a.5.5,0,0,1-.376-.273l-.5-1.013-.5,1.013a.5.5,0,0,1-.376.273L3.25,4.582l.809.788a.5.5,0,0,1,.144.443L4.012,6.926l1-.526A.5.5,0,0,1,5.244,6.343Z" fill="#fa9b1d"></path></g></svg>',1),Ut={key:0,class:"text-primary"},qt=t("span",{class:"text-[#000000DE]"},"of ",-1),zt=t("div",{class:"border-y-[1px] mt-4"},null,-1),Yt={class:"mt-4"},Jt=t("div",{class:"border-y-[1px] mt-4"},null,-1),Kt={class:"mt-4"},Wt=t("div",{class:"leading-6 text-[20px] font-medium ."}," What this place offers ",-1),Qt={class:"grid grid-cols-3 mt-[21.51px] gap-11 text-sm leading-5 text-[#000000DE] md:grid-cols-2 xs:grid-cols-1"},Xt=["src","alt"],es=t("div",{class:"border-y-[1px] mt-4"},null,-1),ts=t("div",{class:"text-primary font-medium"}," See More Rooms and Rates ",-1),ss=t("div",{class:"border-y-[1px] mt-4"},null,-1),os=t("div",{class:"text-xl leading-6 font-medium"},"Description",-1),as={class:"mt-5 text-16-24"},ls=t("div",{class:"border-y-[1px] mt-4"},null,-1),ns={class:"mt-4"},is=t("div",{class:"leading-6 text-[20px] font-medium"},"Select add-ons",-1),ds={class:"mt-5 grid grid-cols-3 gap-8 md:grid-cols-2"},cs=["src"],rs={class:"md:px-2"},us=["data-tip"],ms={class:"text-sm leading-6 font-bold mt-[10px] truncate text-left"},ps={key:1,class:"text-sm leading-6 font-bold mt-[10px] truncate text-left"},_s={class:"mt-1 text-xs"},hs=["onClick"],vs={key:0,class:"flex gap-2 justify-center items-center"},fs=t("span",null,"Selected",-1),ys={key:0,xmlns:"http://www.w3.org/2000/svg",width:"10.705",height:"10.705",viewBox:"0 0 10.705 10.705"},xs=t("path",{id:"icn-selected-payment",d:"M7.353,12.705A5.353,5.353,0,1,0,2,7.353,5.353,5.353,0,0,0,7.353,12.705Zm2.48-6.218a.669.669,0,1,0-.946-.946l-2.2,2.2L5.818,6.88a.669.669,0,1,0-.946.946L6.211,9.164a.669.669,0,0,0,.946,0L9.833,6.488Z",transform:"translate(-2 -2)",fill:"#fff","fill-rule":"evenodd"},null,-1),gs=[xs],bs={key:1},ws={key:0,class:"flex items-center mt-[10px] justify-between border"},ks={class:"p-1 px-3 border-r cursor-pointer xs:flex-1 xs:p-1 xs:flex xs:justify-center"},Rs={class:"xs:flex-1"},$s={class:"mx-3 text-base"},As={class:"py-1 px-3 border-l cursor-pointer xs:flex-1 xs:p-1 xs:flex xs:justify-center"},Cs={key:1,class:"flex gap-2 mt-1"},Ps=t("span",{class:"text-xs"},"Sorry! You have reached the max quantity for this option.",-1),Ds=t("div",{id:"hotel-addons"},null,-1),Ms=t("div",{class:"border-y-[1px] mt-4"},null,-1),Ss={class:"shadow-2xl payment-container md:mx-[-16px]"},Ts=t("div",{class:c(["mt-4","py-4","px-8","flex","justify-between","items-center","bg-white","","text-xl","leading-6","font-medium"])}," Payment Option ",-1),Ls={class:"bg-[#F6F6F6] pt-8 px-8 pb-8 xs:px-4 xs:py-4"},Gs={class:"flex justify-between"},Es={class:"flex gap-3 items-center"},Ns=["src"],Bs={class:"flex gap-10 items-center md:gap-2"},Fs={class:"md:w-fit"},Is={key:0,class:"bg-[#F6F6F6] w-4 h-4 rounded-full"},js={key:1,id:"icn-selected-payment",xmlns:"http://www.w3.org/2000/svg",width:"14.728",height:"14.355",viewBox:"0 0 14.728 14.355"},Vs=t("path",{id:"icn-selected-payment-2","data-name":"icn-selected-payment",d:"M9.364,16.355a7.272,7.272,0,0,0,7.364-7.177A7.272,7.272,0,0,0,9.364,2,7.272,7.272,0,0,0,2,9.177,7.272,7.272,0,0,0,9.364,16.355Zm3.412-8.338a.881.881,0,0,0,0-1.269.937.937,0,0,0-1.3,0L8.443,9.7l-1.19-1.16a.937.937,0,0,0-1.3,0,.881.881,0,0,0,0,1.269l1.841,1.794a.937.937,0,0,0,1.3,0l3.682-3.589Z",transform:"translate(-2 -2)",fill:"#046a38","fill-rule":"evenodd"},null,-1),Os=[Vs],Zs=["onClick"],Hs={class:"flex justify-between"},Us={class:"flex gap-3 items-center"},qs=["src"],zs={class:"flex gap-10 items-center md:gap-2"},Ys={class:"md:w-fit"},Js={key:0,class:"bg-[#F6F6F6] w-4 h-4 rounded-full"},Ks={key:1,id:"icn-selected-payment",xmlns:"http://www.w3.org/2000/svg",width:"14.728",height:"14.355",viewBox:"0 0 14.728 14.355"},Ws=t("path",{id:"icn-selected-payment-2","data-name":"icn-selected-payment",d:"M9.364,16.355a7.272,7.272,0,0,0,7.364-7.177A7.272,7.272,0,0,0,9.364,2,7.272,7.272,0,0,0,2,9.177,7.272,7.272,0,0,0,9.364,16.355Zm3.412-8.338a.881.881,0,0,0,0-1.269.937.937,0,0,0-1.3,0L8.443,9.7l-1.19-1.16a.937.937,0,0,0-1.3,0,.881.881,0,0,0,0,1.269l1.841,1.794a.937.937,0,0,0,1.3,0l3.682-3.589Z",transform:"translate(-2 -2)",fill:"#046a38","fill-rule":"evenodd"},null,-1),Qs=[Ws],Xs=ge('<div class="flex gap-3"><svg id="ico_pay_at_hotel" data-name="ico_pay at hotel" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g id="Rectangle_624" data-name="Rectangle 624" fill="none" stroke="#046a38" stroke-width="2"><rect width="24" height="24" rx="3" stroke="none"></rect><rect x="1" y="1" width="22" height="22" rx="2" fill="none"></rect></g><g id="icn-payment-default" transform="translate(9.47 6.417)"><path id="Path_7461" data-name="Path 7461" d="M-44.554,4.233a1.361,1.361,0,0,1,1.359,1.359.452.452,0,0,0,.452.452.452.452,0,0,0,.452-.452A2.268,2.268,0,0,0-44.1,3.374V2.508a.453.453,0,0,0-.452-.452.453.453,0,0,0-.453.452v.865a2.268,2.268,0,0,0-1.811,2.218,2.266,2.266,0,0,0,2.264,2.264,1.361,1.361,0,0,1,1.359,1.36,1.361,1.361,0,0,1-1.359,1.359,1.361,1.361,0,0,1-1.36-1.359.452.452,0,0,0-.452-.452.453.453,0,0,0-.452.452,2.268,2.268,0,0,0,1.811,2.218V12.3a.452.452,0,0,0,.453.452A.452.452,0,0,0-44.1,12.3v-.866A2.268,2.268,0,0,0-42.29,9.216a2.266,2.266,0,0,0-2.264-2.264,1.361,1.361,0,0,1-1.36-1.359A1.361,1.361,0,0,1-44.554,4.233Z" transform="translate(46.973 -1.901)" fill="#046a38"></path><path id="Path_7461_-_Outline" data-name="Path 7461 - Outline" d="M-44.549,1.906a.608.608,0,0,1,.607.607v.742A2.428,2.428,0,0,1-42.13,5.6a.608.608,0,0,1-.607.607.608.608,0,0,1-.607-.607,1.206,1.206,0,0,0-1.2-1.2,1.206,1.206,0,0,0-1.205,1.2,1.206,1.206,0,0,0,1.205,1.2A2.422,2.422,0,0,1-42.13,9.22a2.427,2.427,0,0,1-1.811,2.341V12.3a.607.607,0,0,1-.607.606.608.608,0,0,1-.608-.606v-.743A2.427,2.427,0,0,1-46.968,9.22a.608.608,0,0,1,.607-.607.608.608,0,0,1,.607.607,1.206,1.206,0,0,0,1.205,1.2,1.206,1.206,0,0,0,1.2-1.2,1.206,1.206,0,0,0-1.2-1.205A2.422,2.422,0,0,1-46.968,5.6a2.428,2.428,0,0,1,1.811-2.341V2.513A.608.608,0,0,1-44.549,1.906Zm1.811,3.988a.3.3,0,0,0,.3-.3A2.116,2.116,0,0,0-44.127,3.53l-.124-.025V2.513a.3.3,0,0,0-.3-.3.3.3,0,0,0-.3.3V3.5l-.124.025A2.116,2.116,0,0,0-46.658,5.6a2.112,2.112,0,0,0,2.11,2.109A1.516,1.516,0,0,1-43.035,9.22a1.516,1.516,0,0,1-1.514,1.514A1.516,1.516,0,0,1-46.063,9.22a.3.3,0,0,0-.3-.3.3.3,0,0,0-.3.3,2.116,2.116,0,0,0,1.688,2.066l.124.025V12.3a.3.3,0,0,0,.3.3.3.3,0,0,0,.3-.3v-.993l.124-.025A2.116,2.116,0,0,0-42.44,9.22a2.112,2.112,0,0,0-2.109-2.11A1.516,1.516,0,0,1-46.063,5.6a1.516,1.516,0,0,1,1.515-1.514A1.516,1.516,0,0,1-43.035,5.6.3.3,0,0,0-42.737,5.894Z" transform="translate(46.968 -1.906)" fill="#046a38"></path></g></svg><span>Pay at Hotel</span></div>',1),eo={key:0,class:"bg-[#F6F6F6] w-4 h-4 rounded-full"},to={key:1,id:"icn-selected-payment",xmlns:"http://www.w3.org/2000/svg",width:"14.728",height:"14.355",viewBox:"0 0 14.728 14.355"},so=t("path",{id:"icn-selected-payment-2","data-name":"icn-selected-payment",d:"M9.364,16.355a7.272,7.272,0,0,0,7.364-7.177A7.272,7.272,0,0,0,9.364,2,7.272,7.272,0,0,0,2,9.177,7.272,7.272,0,0,0,9.364,16.355Zm3.412-8.338a.881.881,0,0,0,0-1.269.937.937,0,0,0-1.3,0L8.443,9.7l-1.19-1.16a.937.937,0,0,0-1.3,0,.881.881,0,0,0,0,1.269l1.841,1.794a.937.937,0,0,0,1.3,0l3.682-3.589Z",transform:"translate(-2 -2)",fill:"#046a38","fill-rule":"evenodd"},null,-1),oo=[so],ao={class:"flex gap-3"},lo=ge('<svg id="ico-pay_with_credit_card" data-name="ico-pay with credit card" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g id="ico_pay_at_hotel" data-name="ico_pay at hotel"><g id="Rectangle_624" data-name="Rectangle 624" fill="none" stroke="#046a38" stroke-width="2"><rect width="24" height="24" rx="3" stroke="none"></rect><rect x="1" y="1" width="22" height="22" rx="2" fill="none"></rect></g></g><path id="icn-debit_credit" data-name="icn-debit/credit" d="M3,10.714H24.224M7.717,16.429H8.9m4.717,0h1.179" transform="translate(-2.018 -1)" fill="none" stroke="#046a38" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></path></svg>',1),no={key:0},io={key:1},co={key:0,class:"bg-[#F6F6F6] w-4 h-4 rounded-full"},ro={key:1,id:"icn-selected-payment",xmlns:"http://www.w3.org/2000/svg",width:"14.728",height:"14.355",viewBox:"0 0 14.728 14.355"},uo=t("path",{id:"icn-selected-payment-2","data-name":"icn-selected-payment",d:"M9.364,16.355a7.272,7.272,0,0,0,7.364-7.177A7.272,7.272,0,0,0,9.364,2,7.272,7.272,0,0,0,2,9.177,7.272,7.272,0,0,0,9.364,16.355Zm3.412-8.338a.881.881,0,0,0,0-1.269.937.937,0,0,0-1.3,0L8.443,9.7l-1.19-1.16a.937.937,0,0,0-1.3,0,.881.881,0,0,0,0,1.269l1.841,1.794a.937.937,0,0,0,1.3,0l3.682-3.589Z",transform:"translate(-2 -2)",fill:"#046a38","fill-rule":"evenodd"},null,-1),mo=[uo],po=t("div",{id:"payment-option"},null,-1),_o={class:"mt-4"},ho=t("div",{class:"text-xl leading-6 font-medium"},"Guest Details",-1),vo={class:"mt-5 text-16-24"},fo=t("div",{class:"border-y-[1px] mt-4",id:"guest-details"},null,-1),yo=t("div",{class:"text-xl leading-6 font-medium"}," Cancellation Policy ",-1),xo={class:"mt-5 text-16-24"},go=["innerHTML"],bo={key:1},wo=t("div",{class:"border-y-[1px] mt-4"},null,-1),ko=t("div",{class:"text-xl leading-6 font-medium"},"More Info",-1),Ro={class:"mt-5 text-16-24"},$o=t("div",{class:"border-y-[1px] mt-4"},null,-1),Ao=t("div",{class:"text-xl leading-6 font-medium"},"Contact Us",-1),Co={class:"my-5 text-16-24"},Po=t("div",null," Contact the property directly with any inquiry or special request you have. You can reach Hotel101 team here: ",-1),Do={class:"mt-7"},Mo={class:"text-primary"},So={class:"text-primary"},To=t("div",{class:"border-y-[1px] mt-4"},null,-1),Lo={class:"mt-8"},Go=t("div",{class:"text-xl leading-6 font-medium"},"Special Request",-1),Eo=t("div",{class:"my-5 text-16-24"}," Special requests can't be guaranteed, but the property will do its best to meet your needs. ",-1),No={class:c(["flex","justify-end","mt-4","","text-12-16"])},Bo={__name:"HotelDetails",props:{fetchedDetails:{type:Object,default:{}}},setup(ee){const Q=ee,s=Me(),z=Ze(),x=He(),o=Qe(()=>et(()=>import("./AppRenderCKEditorContent-54b46d39.js"),["assets/AppRenderCKEditorContent-54b46d39.js","assets/index-0d29c91c.js","assets/index-4a00ec69.css","assets/AppRenderCKEditorContent-eacfeced.css"])),y=B(()=>Q.fetchedDetails),Y=f(!1),X=f(!1),g=f(!1),T=f(!1),G=f(!0),C=f(!1),P=f(!1),ue=f(!1),A=f({hotel:!1,card:!1}),w=f([]),v=f(null),E=f(null),le=B(()=>{if(Q.fetchedDetails)return ut(s.selectedRoom.cancellation_days,s.selectedRoom.check_in,s.paymentMethod.hotel||!1)}),ve=async h=>{var O;X.value=!0;const r=tt.fromFormat(h.expireDate,"MM/yy"),b=r.month,M=r.year,F=nt({creditCardNo:h.cardNumber,month:b,year:M,cvc:h.cvv,cardHolderName:h.nameCard});if(x.isGuest){var I={brand:h.cardType,last4:(O=h.cardNumber)==null?void 0:O.substr(-4),credit_card:F};s.setPaymentMethod({cardDetails:I}),A.value.hotel=!0,I.id=h.id,E.value=I,v.value=I.id,Y.value=!1}else{const D=await it(x.auth,F);D.status==200?(v.value=D.data.id,s.setPaymentMethod({cardDetails:{brand:D.data.brand.replace(/\s/g,"").toLowerCase(),last4:D.data.last4,card_id:D.data.id}}),A.value.hotel=!0,await ne(),Y.value=!1):z.alertModal={state:!0,content:"Please input a valid card detail."}}X.value=!1},ne=async()=>{const h=await dt(x.auth);h.status==200?w.value=h.data:console.log(h)};Z(()=>s.vouchers,h=>{te()},{deep:!0}),Z(()=>s.selectedRoom,h=>{te()},{deep:!0});const V=f(0),te=async()=>{if(!s.selectedRoom||!s.selectedRoom.room_id||!s.selectedRoom.rate_id)return;let h=`voucher_id=${s.vouchers?s.vouchers.id:""}`,r=`number_of_rooms=${s.selectedRoom.selected_number_of_rooms?s.selectedRoom.selected_number_of_rooms:""}`,b=`room=${s.selectedRoom.room_id?s.selectedRoom.room_id:""}`,M=`rate=${s.selectedRoom.rate_id?s.selectedRoom.rate_id:""}`,F=`check_in=${s.selectedRoom.check_in?s.selectedRoom.check_in:""}`,I=`check_out=${s.selectedRoom.check_out?s.selectedRoom.check_out:""}`,O=`${h}&${r}&${b}&${M}&${F}&${I}`;const D=await At(O);if(V.value=0,D.status==200){let{data:k}=D;if(k&&k.length>0)for(var J=0;J<k.length;J++)V.value=V.value+k[J].points;else V.value=0}else V.value=0;s.selectedRoom.nightlyRatePoint=V.value};return Se(()=>{var h,r,b,M;!x.isGuest&&(((h=s.selectedRoom.plan)==null?void 0:h.payment_policies)=="Pay Credit"||((r=s.selectedRoom.plan)==null?void 0:r.payment_policies)=="All payment accepted")&&ne(),((b=s.selectedRoom.plan)==null?void 0:b.payment_policies)=="Pay at Hotel"||((M=s.selectedRoom.plan)==null?void 0:M.payment_policies)=="All payment accepted"?(s.setPaymentMethod({hotel:!0}),A.value.hotel=!0):s.setPaymentMethod({}),te()}),Z(()=>Q.fetchedDetails.ancillaries,h=>{h!=null&&h.length&&s.setAddons(h)},{deep:!0}),Z(()=>x.isGuest,h=>{var r,b;h||(ne(),s.paymentMethod.cardDetails&&s.paymentMethod.cardDetails.credit_card&&(((r=s.selectedRoom.plan)==null?void 0:r.payment_policies)=="Pay at Hotel"||((b=s.selectedRoom.plan)==null?void 0:b.payment_policies)=="All payment accepted"?(s.setPaymentMethod({hotel:!0}),A.value.hotel=!0):s.setPaymentMethod({})))}),(h,r)=>{var b,M,F,I,O,D,J,k,ie,R,fe,H,U,se,ye;return n(),i("div",Dt,[t("img",{class:"create-booking cursor-pointer aspect-video object-contain w-full md:rounded-md md:object-fill",src:e(s).selectedRoom.photo},null,8,Mt),t("div",St,[t("div",Tt,u(e(s)&&e(s).selectedRoom?e(s).selectedRoom.name:""),1),t("div",Lt,u(e(y)?(b=e(y))==null?void 0:b.city:""),1),t("div",Gt,[t("span",Et,u(e(s)&&e(s).selectedRoom?(M=e(s).selectedRoom.room)==null?void 0:M.name:""),1),t("div",Nt,[(n(!0),i(_e,null,he(((F=e(s).selectedRoom.room)==null?void 0:F.max_capacity)<4?(I=e(s).selectedRoom.room)==null?void 0:I.max_capacity:4,a=>(n(),Ue(e(ze),{active:!0,size:"10",key:a}))),128)),t("span",Bt,"Good for "+u(e(s)&&e(s).selectedRoom?(O=e(s).selectedRoom.room)==null?void 0:O.max_capacity:""),1)])]),e(s).selectedRoom.discountedRate!==e(s).selectedRoom.rate?(n(),i("div",Ft,[e(s).vouchers&&e(s).vouchers.mod_type==3?(n(),i("div",It,u(e(ae)(e(y).currency,parseFloat(e(s).vouchers.mod_value)*e(s).selectedRoom.stay)),1)):(n(),i("div",jt,u(e(s)&&e(s).selectedRoom?e(s).selectedRoom.discountedRate:""),1))])):(n(),i("div",Vt,[e(s).vouchers&&e(s).vouchers.mod_type==3?(n(),i("div",Ot,u(e(ae)(e(y).currency,parseFloat(e(s).vouchers.mod_value)*e(s).selectedRoom.stay)),1)):L("",!0)])),t("div",{class:c(["mt-1 text-[12px] leading-4",[e(s).vouchers&&e(s).vouchers.mod_type==3?"mt-0":""]])},[t("span",{class:c([e(s).selectedRoom.discountedRate!==e(s).selectedRoom.rate?"line-through":"text-base font-bold",e(s).vouchers&&e(s).vouchers.mod_type==3?"line-through font-normal":""])},u(e(s)&&e(s).selectedRoom?e(s).selectedRoom.rate:""),3),t("span",null,"/ "+u(e(s).selectedRoom.stay)+" night"+u(e(s).selectedRoom.stay>1?"s":""),1)],2),t("div",Zt,[Ht,t("div",null,[W(" Earn up to "),e(s).selectedRoom.multiplier>1?(n(),i("span",Ut,[t("strong",null,u(e(s)&&e(s).selectedRoom?e(s).selectedRoom.multiplier:"")+"x ",1),qt])):L("",!0),W(" "+u(e(ae)("",parseFloat(V.value)))+" points ",1)])])]),zt,t("div",Yt,[_(gt,{checkin:e(re)(new Date(e(s).selectedRoom.check_in),!0),checkout:e(re)(new Date(e(s).selectedRoom.check_out),!0),rooms:e(s).selectedRoom.selected_number_of_rooms},null,8,["checkin","checkout","rooms"])]),Jt,t("div",Kt,[Wt,t("div",Qt,[(n(!0),i(_e,null,he(e(y).amenities,(a,oe)=>(n(),i("div",{class:"flex gap-2 items-start",key:oe},[t("img",{src:a.icon,alt:a.name,width:"20"},null,8,Xt),t("span",null,u(a.name),1)]))),128))]),es,t("div",{class:"mt-5 h-12 border border-[#046A38] rounded-lg flex items-center justify-between px-10 text-sm leading-4 cursor-pointer bg-white",onClick:r[0]||(r[0]=a=>{h.$router.push({name:"BaseRoute::searchResult"}),e(s).setBooking({...e(s).booking,area:e(y).name,propertyId:e(y).id,roomCount:e(s).selectedRoom.selected_number_of_rooms,date:[e(re)(new Date(e(s).selectedRoom.check_in),!0),e(re)(new Date(e(s).selectedRoom.check_out),!0)]})})},[ts,_(e(de),{height:"14",width:"14",color:"#046A38"})])]),ss,t("div",null,[t("div",{class:"mt-4 flex justify-between items-center",onClick:r[1]||(r[1]=a=>g.value=!g.value)},[os,_(e(de),{height:"14",width:"17",color:"#046A38",direction:g.value?"up":"down"},null,8,["direction"])]),K(t("div",as,[_(e(o),{htmlContent:e(y).description||""},null,8,["htmlContent"])],512),[[ce,g.value]])]),ls,t("div",ns,[is,t("div",ds,[(n(!0),i(_e,null,he((D=e(y).ancillaries)==null?void 0:D.slice(0,6),(a,oe)=>{var me;return n(),i("div",{class:"bg-white",key:oe},[t("img",{class:"aspect-video object-cover md:rounded-md md:w-full",src:a.thumbnail,alt:"breakfast-icon"},null,8,cs),t("div",rs,[((me=a.name)==null?void 0:me.length)>16?(n(),i("div",{key:0,class:"tooltip tooltip-bottom tooltip-primary block","data-tip":a.name},[t("div",ms,u(a.name),1)],8,us)):(n(),i("div",ps,u(a.name),1)),t("div",_s,u(e(ae)(e(y).currency,a.rate)),1),t("button",{type:"button",class:c(["w-full py-2 rounded-md mt-[10px] flex gap-2 justify-center items-center text-xs",a.selected?"btn-primary":"btn-primary-outline"]),onClick:xe=>{a.selected=!a.selected,a.count=1,a.tempCount=1,a.showError=!1}},[a.selected?(n(),i("div",vs,[fs,a.selected?(n(),i("svg",ys,gs)):L("",!0)])):(n(),i("span",bs,"Select"))],10,hs)]),a.selected&&a.max_quantity>1?(n(),i("div",ws,[t("div",ks,[_(e(yt),{color:"#046a38",onClick:xe=>{a.count<=1||a.count--,a!=null&&a.showError&&(a.showError=!1),a.tempCount=a.count},active:a.count!==1},null,8,["onClick","active"])]),t("div",Rs,[t("label",$s,u(a.count),1)]),t("div",As,[_(e(xt),{color:"#046a38",active:a.count!==a.max_quantity,onClick:xe=>{a.tempCount++,a.count===a.max_quantity?a.count:a.count++,a.tempCount>a.max_quantity&&(a.showError=!0)}},null,8,["active","onClick"])])])):L("",!0),a!=null&&a.showError?(n(),i("div",Cs,[_(e(rt),{size:"15px",class:"w-[30px]"}),Ps])):L("",!0)])}),128))])]),Ds,Ms,t("div",Ss,[Ts,t("div",Ls,[E.value&&e(x).isGuest&&(((J=e(s).selectedRoom.plan)==null?void 0:J.payment_policies)=="Pay Credit"||((k=e(s).selectedRoom.plan)==null?void 0:k.payment_policies)=="All payment accepted")?(n(),i("div",{key:0,class:"bg-white card p-5 rounded-none text-[15px] leading-[19px] text-[#272727] mb-8 xs:p-4 xs:px-2",onClick:r[2]||(r[2]=a=>{v.value=E.value.id,A.value.hotel=!1,A.value.card=!1,e(s).setPaymentMethod({cardDetails:{brand:E.value.brand,last4:E.value.last4,credit_card:E.value.credit_card}})})},[t("div",Gs,[t("div",Es,[t("img",{class:"w-6",src:e(De)(E.value.brand)},null,8,Ns),t("span",null,u(e(Be)(E.value.brand)),1)]),t("div",Bs,[t("div",Fs," *** "+u(E.value.last4),1),E.value.id!=v.value?(n(),i("div",Is)):(n(),i("svg",js,Os))])])])):L("",!0),!e(x).isGuest&&(((ie=e(s).selectedRoom.plan)==null?void 0:ie.payment_policies)=="Pay Credit"||((R=e(s).selectedRoom.plan)==null?void 0:R.payment_policies)=="All payment accepted")?(n(!0),i(_e,{key:1},he(w.value,(a,oe)=>(n(),i("div",{class:"bg-white card p-5 rounded-none text-[15px] leading-[19px] text-[#272727] mb-8 xs:p-4 xs:mb-4 xs:px-2",key:oe,onClick:me=>{v.value=a.id,A.value.hotel=!1,A.value.card=!1,e(s).setPaymentMethod({cardDetails:{brand:a.brand.replace(/\s/g,"").toLowerCase(),last4:a.last4,card_id:a.id}})}},[t("div",Hs,[t("div",Us,[t("img",{class:"w-6",src:e(De)(a.brand.replace(/\s/g,"").toLowerCase())},null,8,qs),t("span",null,u(e(Be)(a.brand.replace(/\s/g,"").toLowerCase())),1)]),t("div",zs,[t("div",Ys,"*** "+u(a.last4),1),a.id!=v.value?(n(),i("div",Js)):(n(),i("svg",Ks,Qs))])])],8,Zs))),128)):L("",!0),((fe=e(s).selectedRoom.plan)==null?void 0:fe.payment_policies)=="Pay at Hotel"||((H=e(s).selectedRoom.plan)==null?void 0:H.payment_policies)=="All payment accepted"?(n(),i("div",{key:2,class:"bg-white flex items-center justify-between p-5",onClick:r[3]||(r[3]=a=>{A.value.hotel=!0,A.value.card=!1,v.value=null,e(s).setPaymentMethod({hotel:!0})})},[Xs,e(s).paymentMethod.hotel?(n(),i("svg",to,oo)):(n(),i("div",eo))])):L("",!0),(((U=e(s).selectedRoom.plan)==null?void 0:U.payment_policies)=="Pay Credit"||((se=e(s).selectedRoom.plan)==null?void 0:se.payment_policies)=="All payment accepted")&&w.value.length<10?(n(),i("div",{key:3,class:"my-8 bg-white flex items-center justify-between p-5",onClick:r[4]||(r[4]=a=>Y.value=!0)},[t("div",ao,[lo,!e(x).isGuest&&w.value.length>=1?(n(),i("span",no,"New Credit Card")):(n(),i("span",io,"Pay with Credit Card"))]),A.value.card?(n(),i("svg",ro,mo)):(n(),i("div",co))])):L("",!0)])]),po,t("div",_o,[t("div",{class:"mt-4 flex justify-between items-center",onClick:r[5]||(r[5]=a=>G.value=!G.value)},[ho,_(e(de),{height:"14",width:"17",color:"#046A38",direction:G.value?"up":"down"},null,8,["direction"])]),K(t("div",vo,[_(bt)],512),[[ce,G.value]])]),fo,t("div",null,[t("div",{class:"mt-4 flex justify-between items-center",onClick:r[6]||(r[6]=a=>T.value=!T.value)},[yo,_(e(de),{height:"14",width:"17",color:"#046A38",direction:T.value?"up":"down"},null,8,["direction"])]),K(t("div",xo,[e(s).selectedRoom.refund_policy==="Refundable"?(n(),i("span",{key:0,innerHTML:e(le)},null,8,go)):(n(),i("span",bo," If you cancel, this booking is non-refundable. "))],512),[[ce,T.value]])]),wo,t("div",null,[t("div",{class:"mt-4 flex justify-between items-center",onClick:r[7]||(r[7]=a=>C.value=!C.value)},[ko,_(e(de),{height:"14",width:"17",color:"#046A38",direction:C.value?"up":"down"},null,8,["direction"])]),K(t("div",Ro,[_(e(o),{htmlContent:e(y).more_info||""},null,8,["htmlContent"])],512),[[ce,C.value]])]),$o,t("div",null,[t("div",{class:"mt-4 flex justify-between items-center",onClick:r[8]||(r[8]=a=>P.value=!P.value)},[Ao,_(e(de),{height:"14",width:"17",color:"#046A38",direction:P.value?"up":"down"},null,8,["direction"])]),K(t("div",Co,[Po,t("div",Do,[W(" Phone Number : "),t("span",Mo,u(e(y).contact||"N/A"),1)]),t("div",null,[W(" Email: "),t("span",So,u(e(y).email||"N/A"),1)])],512),[[ce,P.value]])]),To,t("div",Lo,[Go,Eo,K(t("textarea",{"onUpdate:modelValue":r[9]||(r[9]=a=>e(s).additionalNotes=a),placeholder:"Input additional notes",maxlength:"500",class:c(["w-full","border","focus-visible:outline-[#046A38]","px-2","py-3","rounded-lg"]),rows:"4"},null,512),[[Xe,e(s).additionalNotes]]),t("div",No,u((ye=e(s).additionalNotes)==null?void 0:ye.length)+"/500 ",1)]),_(e(vt),{show:ue.value,"onUpdate:code":r[10]||(r[10]=a=>e(s).guestDetails.countryCode=a),"onUpdate:show":r[11]||(r[11]=a=>ue.value=a)},null,8,["show"]),_(e(ft),{show:Y.value,saving:X.value,"onUpdate:show":r[12]||(r[12]=a=>Y.value=a),"onUpdate:code":r[13]||(r[13]=a=>ve(a))},null,8,["show","saving"])])}}},Fo={class:c(["shadow-lg"," flex","flex-col","rounded-lg bg-white"])},Io={class:c(["pl-[11px]","mt-[13px]","text-2xl","leading-6","md:px-[13px]"])},jo={class:c(["mt-[11px]","py-2","bg-[#E3F3E6]","px-8","flex","gap-3","items-start","md:px-5"])},Vo={class:"break-all"},Oo={class:"flex items-center gap-[4.21px] whitespace-nowrap"},Zo={class:c(["px-8","mt-[18px]"])},Ho={class:c(["flex"])},Uo={class:"flex-1"},qo=t("div",{class:"text-14-24 font-bold"},"Check-in",-1),zo={key:0,class:"text-14-20"},Yo={class:"flex-1"},Jo=t("div",{class:"text-14-24 font-bold"},"Check-out",-1),Ko={key:0,class:"text-14-20"},Wo={class:""},Qo={class:"flex items-start gap-1"},Xo=ge('<svg id="ico-coins" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 10.488 10.488"><g id="Group_13401" data-name="Group 13401"><g id="Path_7457" data-name="Path 7457"><path id="Path_7458" data-name="Path 7458" d="M5.244,10.488a5.244,5.244,0,1,1,5.244-5.244A5.25,5.25,0,0,1,5.244,10.488ZM5.244,1A4.244,4.244,0,1,0,9.488,5.244,4.249,4.249,0,0,0,5.244,1Z" fill="#fa9b1d"></path></g></g><g id="Group_13402" data-name="Group 13402"><path id="Path_7459" data-name="Path 7459" d="M7.141,8.34a.493.493,0,0,1-.233-.058L5.244,7.407l-1.663.875a.494.494,0,0,1-.527-.038.5.5,0,0,1-.2-.489L3.173,5.9,1.826,4.59A.5.5,0,0,1,2.1,3.738l1.86-.271L4.8,1.782a.519.519,0,0,1,.9,0l.832,1.685,1.861.271a.5.5,0,0,1,.276.852L7.315,5.9l.319,1.853a.5.5,0,0,1-.493.585Zm-1.9-2a.5.5,0,0,1,.233.057l1,.526L6.285,5.813A.5.5,0,0,1,6.43,5.37l.808-.788L6.12,4.419a.5.5,0,0,1-.376-.273l-.5-1.013-.5,1.013a.5.5,0,0,1-.376.273L3.25,4.582l.809.788a.5.5,0,0,1,.144.443L4.012,6.926l1-.526A.5.5,0,0,1,5.244,6.343Z" fill="#fa9b1d"></path></g></svg>',1),ea={key:0,class:"text-primary"},ta=t("span",{class:"text-[#000000DE]"},"of ",-1),sa=t("div",{class:"mt-4 border-y-[1px]"},null,-1),oa={class:"xs:ml-[10px]"},aa=t("div",{class:c(["font-bold","text-14-24",""])}," My Voucher ",-1),la={class:c(["font-medium","text-12-16","","text-primary","cursor-pointer"])},na={key:0,class:"text-14-16 text-black cursor-auto"},ia={key:1},da={key:0,class:"flex gap-[10.27px]"},ca=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14.73",height:"14.73",viewBox:"0 0 10.705 10.705"},[t("path",{id:"icn-selected-payment",d:"M7.353,12.705A5.353,5.353,0,1,0,2,7.353,5.353,5.353,0,0,0,7.353,12.705Zm2.48-6.218a.669.669,0,1,0-.946-.946l-2.2,2.2L5.818,6.88a.669.669,0,1,0-.946.946L6.211,9.164a.669.669,0,0,0,.946,0L9.833,6.488Z",transform:"translate(-2 -2)",fill:"#046A38","fill-rule":"evenodd"})],-1),ra={class:"truncate xs:w-[75%]"},ua={key:0,class:c(["text-12-16",""])},ma=t("path",{id:"icn-exit",d:"M4.293,4.293a1,1,0,0,1,1.414,0L10,8.586l4.293-4.293a1,1,0,1,1,1.414,1.414L11.414,10l4.293,4.293a1,1,0,1,1-1.414,1.414L10,11.414,5.707,15.707a1,1,0,1,1-1.414-1.414L8.586,10,4.293,5.707a1,1,0,0,1,0-1.414Z",transform:"translate(-4 -4)",fill:"#707070","fill-rule":"evenodd"},null,-1),pa=[ma],_a={key:1},ha={class:c(["flex","gap-[10px]","items-center"])},va=t("div",{class:c(["font-bold","text-14-24",""])}," Redeem Points ",-1),fa={class:c(["font-medium","text-12-16",""])},ya={key:0,class:"text-14-16 text-black cursor-auto"},xa={key:0,class:"flex items-end"},ga={class:"relative inline-flex items-center cursor-pointer"},ba=["disabled"],wa=["disabled"],ka=t("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-nonedark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-[#046A38]"},null,-1),Ra={class:c(["px-4 py-2","flex","items-center","justify-between","hover:bg-[#E3F3E6]"])},$a={class:c(["flex","gap-[10px]","items-center"])},Aa=t("div",{class:c(["font-bold","text-14-24",""])},"Add-ons",-1),Ca=t("div",null,[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14.73",height:"14.73",viewBox:"0 0 10.705 10.705"},[t("path",{id:"icn-selected-payment-create",d:"M7.353,12.705A5.353,5.353,0,1,0,2,7.353,5.353,5.353,0,0,0,7.353,12.705Zm2.48-6.218a.669.669,0,1,0-.946-.946l-2.2,2.2L5.818,6.88a.669.669,0,1,0-.946.946L6.211,9.164a.669.669,0,0,0,.946,0L9.833,6.488Z",transform:"translate(-2 -2)",fill:"#046A38","fill-rule":"evenodd"})])],-1),Pa={class:"w-[calc(100vw/4)] md:w-[60vw]"},Da={class:"truncate"},Ma={key:0,class:c(["text-12-16",""])},Sa={class:c(["px-4 py-2","flex","items-center","justify-between","hover:bg-[#E3F3E6]"])},Ta={class:c(["flex","gap-[10px]","items-center"])},La=t("div",{class:c(["font-bold","text-14-24",""])}," Payment Option ",-1),Ga={key:0,class:c(["text-12-16",""])},Ea={key:1,class:c(["flex items-center gap-1 text-12-16",""])},Na=["src"],Ba={key:2,class:c(["text-12-16",""])},Fa=t("div",{class:c(["flex","gap-[10px]","items-center"])},[t("div",{class:"w-5"}),t("div",null,[t("div",{class:c(["font-bold","text-14-24",""])}," Amount to Pay "),t("div",{class:c(["font-medium","text-12-16","","text-primary","cursor-pointer"])}," View booking summary ")])],-1),Ia={class:c(["font-bold","text-16-24",""])},ja={class:c(["px-[18px]","my-6","","text-13-16"])},Va=t("a",{href:"/privacy-policy",class:"text-primary",target:"_blank"},"Hotel101 Privacy Notice, ",-1),Oa=["href"],Za=["disabled"],Ha={key:0},Ua={key:1},qa={class:"flex justify-center"},za={class:"text-14-20 mt-5"},Ya=t("div",{class:"font-bold"},"Guest Details are required.",-1),Ja=t("div",null,[W(" Please enter a valid email address "),t("br"),W(" or Login/Sign Up to proceed ")],-1),Ka=t("div",{class:"font-bold mt-5"},"Sign up for perks",-1),Wa={class:"mt-2 flex gap-2"},Qa=t("div",null,"Exclusive promo vouchers",-1),Xa={class:"mt-1 flex gap-2"},el=t("div",null,"Earn and use Loyalty Points",-1),tl={class:"mt-10 flex flex-col"},sl={class:"flex justify-center"},ol={class:"text-14-20"},al=t("div",{class:"font-bold mt-5 text-center"},"Sign up for perks",-1),ll={class:"mt-2 flex gap-2"},nl=t("div",null,"Exclusive promo vouchers",-1),il={class:"mt-1 flex gap-2"},dl=t("div",null,"Earn and use Loyalty Points",-1),cl={class:"mt-10 flex flex-col"},rl={class:"text-14-20 mt-5"},ul={class:"flex justify-center"},ml={class:"mt-5"},pl={class:"mt-10 flex flex-col"},_l={__name:"Summary",props:{fetchedDetails:{type:Object,default:{}}},setup(ee){const Q=ee,s=He(),z=qe(),x=Ze(),o=Me(),y=Ct(),Y=st.STRIPE_KEY;var X=null;const g=f(!1),T=f(!1),G=f(!1),C=f(!1),P=f(""),ue=f(""),A=f(!1),w=f(!1),v=B(()=>o.selectedRoom),E=f(!1),le=f(!1),ve=B(()=>{var d;return!((d=o.guestDetails)!=null&&d.length)}),ne=B(()=>_t(o.addOns)),V=B(()=>Ie(v.value,o.vouchers)),te=()=>{let d=R.value;return Ie({plan:{rates:d},selected_number_of_rooms:v.value.selected_number_of_rooms})},h=B(()=>ht(o.addOns,v.value)*v.value.selected_number_of_rooms),r=B(()=>{var d=0;return o.vouchers&&(o.vouchers.mod_type==2?d=M.value*(o.vouchers.mod_value/100):d=Number(o.vouchers.mod_value)),!d&&(w.value=!1),parseFloat(d.toFixed(2))}),b=f(0),M=B(()=>je(V.value,h.value)),F=()=>je(te(),h.value),I=f(0),O=f(0),D=async(d=!1)=>{if(o.vouchers&&o.vouchers.mod_type==3){if(Number.isNaN(F()))return}else if(Number.isNaN(M.value))return;let l=o.vouchers&&o.vouchers.mod_type==3?F():M.value;const m={total:l,propertyId:o.booking.propertyId};try{const $=await Pt(m);let{currency_value:N,points:q}=$.data;l<N?(I.value=o.selectedRoom.fetchedPoints=l,O.value=l,d&&w.value&&(b.value=l)):(I.value=o.selectedRoom.fetchedPoints=N||0,O.value=q,d&&w.value&&(b.value=N||0))}catch{}},J=()=>{if(o.vouchers){const d=Date.parse(o.vouchers.checkin_start),l=Date.parse(o.vouchers.checkin_end),m=Date.parse(o.selectedRoom.check_in+" 00:00:00"),$=Date.parse(o.selectedRoom.check_out+" 00:00:00");(m<d||$>l)&&(o.vouchers=null)}},k=f(""),ie=f(""),R=f([]);Z(()=>o.vouchers,(d,l)=>{if(R.value=[],d){if(k.value=d.mod_type+"",ie.value=d.mod_value,R.value=localStorage.getItem("_ROOMRATES")?JSON.parse(localStorage.getItem("_ROOMRATES")):[],R.value.length>0)for(var m=0;m<R.value.length;m++)R.value[m].discount_rate=null,R.value[m].rate=parseFloat(ie.value)}else k.value="";localStorage.getItem("isClickVoucher")?(D(!0),setTimeout(()=>{localStorage.removeItem("isClickVoucher")},250)):D(!1)}),Z(()=>o.selectedRoom,(d,l)=>{if(R.value=[],d&&o.vouchers&&o.vouchers.mod_type===3&&(R.value=localStorage.getItem("_ROOMRATES")?JSON.parse(localStorage.getItem("_ROOMRATES")):[],R.value.length>0))for(var m=0;m<R.value.length;m++)R.value[m].discount_rate=null,R.value[m].rate=parseFloat(ie.value);o.vouchers=null,w.value=!1,D()});const fe=()=>{if(o.selectedRoom){let d=o.selectedRoom.plan.rates.filter(l=>(l.base_rate=l.rate,l));localStorage.setItem("_ROOMRATES",JSON.stringify(d))}w.value=!1};Z(()=>M.value,d=>{s.isGuest||(o.vouchers=null,w.value=!1,D())}),Z(()=>o.selectedRoom.check_in,()=>{J()}),Z(()=>o.selectedRoom.check_out,()=>{J()}),Z(()=>w.value,d=>{if(d){let l=k.value=="3"?U():H.value,m=parseFloat(I.value.toFixed(2));l<m?b.value=l:b.value=m}else b.value=0}),Z(()=>s.isGuest,d=>{!d&&D()});const H=B(()=>Ve(V.value,h.value,r.value,b.value)),U=()=>Ve(te(),h.value,0,b.value),se=B(()=>Q.fetchedDetails),ye=B(()=>{if(!se.value)return 0;const{tax_percent:d,tax_fixed:l,service_charge:m}=se.value;return Oe(H.value,d,l,m)}),a=()=>{if(!se.value)return 0;const{tax_percent:d,tax_fixed:l,service_charge:m}=se.value;return Oe(U(),d,l,m)},oe=()=>{var N,q;s.isGuest&&(o.guestEmail=o.guestDetails[0].guest_email);let d=[];if(o.vouchers&&o.vouchers.mod_type==3)for(var l=0;l<R.value.length;l++)d.push({date:R.value[l].date,rate:R.value[l].rate,base_rate:R.value[l].base_rate});else d=(N=v.value.plan)==null?void 0:N.rates.map(S=>({date:S.date,rate:S.discount_rate??S.rate,base_rate:S.rate}));const m=o.addOns.filter(S=>S.selected).map(S=>({ancillary_id:S.id,unit_rate:S.rate,quantity:S.count,number_of_rooms:o.selectedRoom.selected_number_of_rooms})),$={rate_id:(q=o.selectedRoom.plan)==null?void 0:q.id,room_id:o.selectedRoom.room.id,number_of_rooms:o.selectedRoom.selected_number_of_rooms,check_in:o.selectedRoom.check_in,check_out:o.selectedRoom.check_out,ancillaries:m,rates:d,guest_list:o.guestDetails,total:o.vouchers&&o.vouchers.mod_type==3?F():M.value,total_payable:o.vouchers&&o.vouchers.mod_type==3?U():H.value,note:o.additionalNotes,from:"web",points_to_redeem:s.isGuest?null:w.value?O.value:null};return o.vouchers&&($.voucher_id=o.vouchers.id,$.voucher_discount=o.vouchers&&o.vouchers.mod_type==3?0:r.value),o.paymentMethod.hotel?$.payment_method="1":($.payment_method="2",o.paymentMethod.cardDetails.card_id?$.saved_card={id:o.paymentMethod.cardDetails.card_id,cvc:o.paymentMethod.cardDetails.cvv}:$.credit_card=o.paymentMethod.cardDetails.credit_card),$},me=()=>{o.paymentMethod.hotel||o.paymentMethod.cardDetails?s.isGuest?Ye():xe():x.alertModal={state:!0,content:"No card was added. Please tap the Payment Option to add a card."}},xe=()=>{ve.value?x.alertModal={state:!0,content:"Please input  at least 1 guest detail."}:o.paymentMethod.cardDetails&&o.paymentMethod.cardDetails.card_id?T.value=!0:be()},Ye=()=>{ve.value?(x.alertModal={state:!0,content:"Please input  at least 1 guest detail."},we("guest-details")):le.value=!0},Je=()=>{G.value=!1,C.value=!1,y.bookingTransactionID="",s.isGuest?z.replace({name:"BaseRoute::ViewBooking",params:{confirmationNo:o.bookingNo}}):z.replace("/booking");const d=z.history;d&&(d.stacks.pop(),d.index--)},be=async()=>{var N,q,S,pe;A.value=!0;const d=oe();let l=null;y.selectedRoomName==y.oldSelectedRoomName&&y.selectedRoomPlan.id==y.oldSelectedRoomPlan.id||C.value?l=y.bookingTransactionID?y.bookingTransactionID:P.value:P.value!=""&&(l=P.value),d.transaction_id=l;try{var m;s.isGuest?m=await Ge(d):m=await Ee(s.auth,d);let{transaction_id:j}=m.data;if(y.bookingTransactionID=j,C.value||(P.value=j||""),C.value=!0,!m.data.id){try{X.handleNextAction({clientSecret:m.data.client_secret}).then(async function(p){var ke="Something went wrong. Please try again.";p.error?(p.error.code=="payment_intent_authentication_failure"?ke="Authentication/OTP has failed. Please try again.":ke=Fe(p.error.message),x.alertModal={state:!0,content:ke},A.value=!1,C.value=!1):(delete d.credit_card,delete d.saved_card,d.intent=p.paymentIntent.id,s.isGuest?m=await Ge(d):m=await Ee(s.auth,d),Te(m),C.value=!1)})}catch{console.log("stripe error")}return}Te(m)}catch(j){var $="Something went wrong. Please try again.";(N=j.response)!=null&&N.data&&((q=j.response)!=null&&q.data.errors?$=j.response.data.errors:$=Fe((S=j.response)==null?void 0:S.data.error)),((pe=j.response)==null?void 0:pe.status)===442?j.response.data.error=="This transaction has already been made. Please check your booking."?(ue.value="Your booking is already confirmed. Please go to My Bookings for your booking details.",G.value=!0):x.alertModal={state:!0,content:$}:x.alertModal={state:!0,content:$}}A.value=!1,C.value=!1},Te=d=>{const{booking_no:l,points_earned:m}=d.data;A.value=!1,o.bookedDetails={pointsEarned:parseInt(m),hotelName:Q.fetchedDetails.name},o.bookingNo=l,Ke(),z.push({name:"BaseRoute::success"})},Ke=()=>{o.selectedRoom={},o.addOns=[],o.paymentMethod.hotel=!1,o.additionalNotes="",o.guestDetails=[]},We=async()=>{X=await $t(Y)},we=d=>{const l=document.getElementById(d);l&&l.scrollIntoView({behavior:"smooth",block:"end"})};return Se(()=>{localStorage.removeItem("isClickVoucher"),C.value=!1,P.value="",window.scrollTo(0,0),We(),o.vouchers=null,o.voucherState=!1,o.additionalNotes="",!s.isGuest&&D()}),(d,l)=>{var m,$,N,q,S,pe,j;return n(),i("div",Fo,[t("div",Io,u(e(v)&&e(v).name?e(v).name:""),1),t("div",jo,[t("span",Vo,u((m=e(v).room)==null?void 0:m.name),1),t("div",Oo,[(n(!0),i(_e,null,he((($=e(v).room)==null?void 0:$.max_capacity)<4?(N=e(v).room)==null?void 0:N.max_capacity:4,p=>(n(),Ue(e(ze),{active:!0,size:"10",key:p}))),128)),t("span",null,"Good for "+u(e(v)&&e(v).room?(q=e(v).room)==null?void 0:q.max_capacity:""),1)])]),t("div",Zo,[t("div",Ho,[t("div",Uo,[qo,e(v).check_in?(n(),i("div",zo,u(e(re)(new Date(e(v).check_in),!0)),1)):L("",!0)]),t("div",Yo,[Jo,e(v).check_out?(n(),i("div",Ko,u(e(re)(new Date(e(v).check_out),!0)),1)):L("",!0)])]),t("div",{class:c(["flex","mt-3","text-12-16","","gap-[6.51px]","items-start"])},[t("div",Wo,u(e(v).stay)+" night"+u(e(v).stay>1?"s":""),1),t("div",Qo,[Xo,t("div",null,[t("div",null,[W(" Earn up to "),e(v)&&e(v).multiplier>1?(n(),i("span",ea,[t("strong",null,u(e(v).multiplier)+"x ",1),ta])):L("",!0),W(" "+u(e(ae)("",parseFloat(e(o).selectedRoom.nightlyRatePoint)))+" points ",1)]),K(t("div",null," Points accessible for registered users only ",512),[[ce,e(s).isGuest]])])])],2)]),sa,t("div",{class:c(["px-4 py-2","flex","items-center","justify-between","hover:bg-[#E3F3E6]",{"opacity-50":e(s).isGuest}])},[t("div",{class:c([["flex","gap-[10px]","items-center"],"xs:gap-0 xs:w-[90%]"])},[_(e($e),{class:"min-w-[24px]"}),t("div",oa,[aa,t("div",la,[e(s).isGuest?(n(),i("span",na," Accessible for registered users only ")):(n(),i("div",ia,[e(o).vouchers?(n(),i("div",da,[ca,t("span",ra,u((S=e(o).vouchers)==null?void 0:S.code),1)])):(n(),i("div",{key:1,onClick:l[0]||(l[0]=p=>e(o).voucherState=!0)}," Select or Enter Code "))]))])])]),e(s).isGuest?L("",!0):(n(),i("div",ua,[e(o).vouchers?(n(),i("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",class:"cursor-pointer",onClick:l[1]||(l[1]=p=>{fe(),e(o).vouchers=null})},pa)):(n(),i("span",_a," No Voucher Selected "))]))],2),t("div",{class:c(["px-4 py-2","flex","items-center","justify-between","hover:bg-[#E3F3E6]",{"opacity-50":e(s).isGuest}])},[t("div",ha,[_(e(Ae)),t("div",null,[va,t("div",fa,[e(s).isGuest?(n(),i("span",ya," Accessible for registered users only ")):(n(),i("span",{key:1,class:c([w.value?"text-primary":"text-[#000000] opacity-50"])}," -"+u(e(ae)("",parseInt(e(o).selectedRoom.fetchedPoints))),3))])])]),e(s).isGuest?L("",!0):(n(),i("div",xa,[t("label",ga,[k.value=="3"?K((n(),i("input",{key:0,type:"checkbox","onUpdate:modelValue":l[2]||(l[2]=p=>w.value=p),class:"sr-only peer",checked:"",disabled:e(s).isGuest||!e(o).selectedRoom.fetchedPoints||!w.value&&e(o).vouchers&&U()===0},null,8,ba)),[[Le,w.value]]):K((n(),i("input",{key:1,type:"checkbox","onUpdate:modelValue":l[3]||(l[3]=p=>w.value=p),class:"sr-only peer",checked:"",disabled:e(s).isGuest||!e(o).selectedRoom.fetchedPoints||!w.value&&e(o).vouchers&&e(H)===0},null,8,wa)),[[Le,w.value]]),ka])]))],2),t("div",Ra,[t("div",$a,[_(e(wt),{size:"24"}),t("div",null,[Aa,e(o).addOns.find(p=>p.selected)?(n(),i("div",{key:0,class:c(["font-medium","text-12-16","","text-primary","flex","gap-[10.27px]","xl:w-[300px]"])},[Ca,t("div",Pa,[t("p",Da,u(e(ne)?e(ne):""),1)])],2)):(n(),i("div",{key:1,class:c(["font-medium","text-12-16","","text-primary","cursor-pointer"]),onClick:l[4]||(l[4]=p=>we("hotel-addons"))}," Select Add-ons "))])]),e(o).addOns.find(p=>p.selected)?L("",!0):(n(),i("div",Ma," No Add Ons "))]),t("div",Sa,[t("div",Ta,[_(e(mt)),t("div",null,[La,t("div",{class:c(["font-medium","text-12-16","","text-primary","cursor-pointer"]),onClick:l[5]||(l[5]=p=>we("payment-option"))}," Select Payment Method ")])]),e(o).paymentMethod.hotel?(n(),i("div",Ga," Pay at Hotel ")):e(o).paymentMethod.cardDetails?(n(),i("div",Ea,[t("img",{class:"w-6 h-6",src:e(De)((pe=e(o).paymentMethod.cardDetails)==null?void 0:pe.brand)},null,8,Na),t("span",null,u((j=e(o).paymentMethod.cardDetails)==null?void 0:j.last4),1)])):(n(),i("div",Ba,"None selected"))]),t("div",{class:c(["px-4 py-2","flex","items-center","justify-between","hover:bg-[#E3F3E6]"]),onClick:l[6]||(l[6]=p=>g.value=!0)},[Fa,t("div",Ia,u(e(ae)(ee.fetchedDetails.currency,k.value=="3"?U():e(H),2)),1)]),t("div",ja,[W(" By completing this booking you agree to the "),Va,t("a",{target:"_blank",href:`/terms-conditions/${e(o).selectedRoom.id}`,class:"text-primary"},"Terms and Conditions.",8,Oa)]),t("button",{id:"confirm-submit-btn",type:"button",class:c(["btn","mx-[18px]","btn-primary","py-[14px]","mb-5","rounded-lg","text-sm","leading-[17px]","font-medium flex items-center justify-center",{loading:A.value},{"btn-primary-disable":A.value||e(o).selectedRoom.isConfirmBtnDisabled}]),onClick:me,disabled:A.value||e(o).selectedRoom.isConfirmBtnDisabled},[e(o).paymentMethod.hotel?(n(),i("span",Ha,"Confirm")):(n(),i("span",Ua," Confirm And Pay "))],10,Za),_(pt,{_mod_type:k.value,show:g.value,propertyDetail:e(v),fetchedDetails:ee.fetchedDetails,computedRoomTotal:k.value=="3"?te():e(V),computedAddonTotal:e(h),computedVoucherTotal:e(s).isGuest?0:e(r),computedPointsRedeemedTotal:e(s).isGuest?0:b.value,computedTaxes:k.value=="3"?a():e(ye),totalAmount:k.value=="3"?U():e(H),totalAmountRaw:k.value=="3"?F():e(M),"onUpdate:show":l[7]||(l[7]=p=>g.value=p)},null,8,["_mod_type","show","propertyDetail","fetchedDetails","computedRoomTotal","computedAddonTotal","computedVoucherTotal","computedPointsRedeemedTotal","computedTaxes","totalAmount","totalAmountRaw"]),_(e(Ce),{show:E.value,"onUpdate:show":l[10]||(l[10]=p=>E.value=p),containerClass:"w-[300px] h-auto"},{default:Re(()=>[t("div",qa,[_(e(Pe))]),t("div",za,[Ya,Ja,Ka,t("div",Wa,[_(e($e)),Qa]),t("div",Xa,[_(e(Ae)),el]),t("div",tl,[t("button",{type:"button",class:"py-[14px] btn-primary",onClick:l[8]||(l[8]=p=>d.$router.push({name:"BaseRoute::login",query:{redirect:d.$route.path}}))}," Login/Sign Up "),t("button",{type:"button",class:"py-[14px] mt-2 btn-primary-outline",onClick:l[9]||(l[9]=p=>{E.value=!1,e(x).setScroll(1300)})}," Continue as Guest ")])])]),_:1},8,["show"]),_(e(Ce),{show:le.value,"onUpdate:show":l[13]||(l[13]=p=>le.value=p),containerClass:"w-[300px] h-auto"},{default:Re(()=>[t("div",sl,[_(e(Pe))]),t("div",ol,[al,t("div",ll,[_(e($e)),nl]),t("div",il,[_(e(Ae)),dl]),t("div",cl,[t("button",{type:"button",class:"py-[14px] btn-primary",onClick:l[11]||(l[11]=p=>d.$router.push({name:"BaseRoute::login",query:{redirect:d.$route.path}}))}," Login/Sign Up "),t("button",{type:"button",class:"py-[14px] mt-2 btn-primary-outline",onClick:l[12]||(l[12]=p=>{le.value=!1,be()})}," Continue as Guest ")])])]),_:1},8,["show"]),_(kt,{show:T.value,"onUpdate:show":l[14]||(l[14]=p=>T.value=p),"onUpdate:code":l[15]||(l[15]=p=>{T.value=!1,e(o).paymentMethod.cardDetails.cvv=p,be()})},null,8,["show"]),_(Rt,{totalAmount:k.value=="3"?U():e(H),totalAmountRaw:k.value=="3"?F():e(M),currency:ee.fetchedDetails.currency},null,8,["totalAmount","totalAmountRaw","currency"]),_(e(Ce),{show:G.value,"onUpdate:show":l[17]||(l[17]=p=>G.value=!1),containerClass:"w-[300px] h-auto"},{default:Re(()=>[t("div",rl,[t("div",ul,[_(e(Pe))]),t("div",ml,u(ue.value),1),t("div",pl,[t("button",{type:"button",class:"py-[14px] btn-primary",onClick:l[16]||(l[16]=p=>Je())}," My Bookings ")])])]),_:1},8,["show"])])}}};const hl={class:"bg-white px-36 pt-4 pb-16 md:px-4 md:bg-[#F6F6F6]"},vl={class:c(["mt-4","flex","gap-28","lg:flex-col md:gap-8"])},fl={class:c(["flex-1","lg:w-full"])},yl={class:c(["flex-1 bg-white"])},xl={__name:"index",setup(ee){const Q=qe(),s=Me(),z=f([{active:!1,label:"Search results",to:"/search-results"},{active:!0,label:"Hotel101 Manila",to:""}]),x=f(),o=B(()=>s.selectedRoom.id),y=B(()=>{var g;return(g=s.selectedRoom.plan)==null?void 0:g.id}),Y=async()=>{try{const g=await ot(o.value);x.value=g.data;const{tax_fixed_title:T,tax_percent_title:G,service_charge_title:C}=x.value;let P=[];G&&P.push(G),T&&P.push(T),C&&P.push(C),x.value={...x.value,taxTitle:P}}catch{}},X=async()=>{try{const g=await at(y.value),{max_stay:T,min_stay:G,cancellation_days:C,refund_policy:P}=g.data;s.selectedRoom.maxStay=T,s.selectedRoom.minStay=G,s.selectedRoom.cancellation_days=C,s.selectedRoom.refund_policy=P}catch{}};return Se(async()=>{var g;if(!((g=s.selectedRoom.bookDate)!=null&&g.length)||!s.selectedRoom.selected_number_of_rooms){Q.push({name:"BaseRoute::home"});return}await Promise.all([Y(),X()]),z.value[1].label=s.selectedRoom.name,s.setAddons([]),s.selectedRoom.check_in=Ne(new Date(s.selectedRoom.bookDate[0])),s.selectedRoom.check_out=Ne(new Date(s.selectedRoom.bookDate[1]))}),(g,T)=>(n(),i("div",hl,[_(e(lt),{class:"",items:z.value},null,8,["items"]),t("div",vl,[t("div",fl,[_(Bo,{fetchedDetails:x.value},null,8,["fetchedDetails"])]),t("div",yl,[_(_l,{class:c(["w-full","lg:w-auto"]),fetchedDetails:x.value},null,8,["fetchedDetails"])])])]))}},Ul=ct(xl,[["__scopeId","data-v-8993b790"]]);export{Ul as default};
