import{s as B,r,c as p,a as e,q as $,u as l,p as j,V as R,n as S,h as m,t as x,C as q,j as w,F as M,A as P,z as V,o as f,b as g,a3 as N,a5 as E,a6 as U}from"./index-0d29c91c.js";import{_ as W}from"./logo-Hotel101-c40e9d3c.js";import{_ as z}from"./icn-intruction-70cf9e04.js";/* empty css                                                               */import{_ as F}from"./icn-intruction-cc70d524.js";import{_ as I}from"./ico-eye-db670207.js";import k from"./AppModal-b27e53ae.js";import"./AppLoader.vue_vue_type_style_index_0_lang-2e650906.js";const T={class:"flex-1 pt-[62px] flex flex-col"},Y=e("div",{class:"flex justify-center"},[e("img",{class:"h-[60px] cursor-pointer",src:W,alt:"hotel101-logo"})],-1),G={class:"mt-10 w-[310px] flex flex-col justify-center mx-auto"},H=e("div",{class:"text-xl leading-6 font-medium"},"Account Deletion",-1),K=e("div",{class:"mt-5 text-sm"}," We are sad that you want to leave us, but please note that account deletion is irreversible. Kindly input your password to delete your account. This does not cancel your existing booking and reservation. ",-1),O=["onSubmit"],J={key:0,class:"flex flex-col"},L=e("label",{class:"text-14-16 font-medium",for:"password"},"Password ",-1),Q={class:"relative"},X=["type"],Z={class:"flex absolute top-[25px] right-[25px]"},ee={class:"text-sm text-red-600"},te={type:"submit",class:"mt-5 w-full btn btn-primary text-sm leading-4"},se=e("div",{class:"border border-t my-5"},null,-1),oe={class:"mt-1 flex flex-col gap-5"},ae={class:"flex justify-center"},le={class:"text-sm text-left"},ne=e("span",{class:"font-bold"},"We're sad to see you go!",-1),re=e("br",null,null,-1),ie={key:0},ue=e("br",null,null,-1),ce={key:1},de={class:"mt-1 flex flex-col gap-5"},pe=e("div",{class:"flex justify-center"},[e("img",{src:z,alt:"instruction-icon"})],-1),me={class:"text-14-20 text-center"},ke={__name:"index",setup(fe){const b=P("$cookies"),h=V(),_=B(),a=_.auth,c=r(!1),i=r(""),n=r(!1),d=r(!1),v=r(""),u=r({password:null}),D=()=>{if(a.type=="basic"){let s=N({password:i.value},{password:["required"]});Object.keys(s).length===0?(y(),n.value=!0):(y(),C(s))}else n.value=!0},A=async()=>{if(a.type=="basic"){var s=await E(a,i.value);s.status==200?(_.logout(b),h.push({name:"BaseRoute::AccountDeletionSucceess"})):s.status==403?u.value.password="Password is incorrect.":(v.value=s.data.message,d.value=!0)}else{var s=await U(a,i.value);s.status==200?(_.logout(b),h.push({name:"BaseRoute::AccountDeletionSucceess"})):(v.value=s.data.message,d.value=!0)}n.value=!1},C=s=>{for(const t in s)u.value[t]=s[t][0]},y=()=>{u.value={password:null}};return(s,t)=>(f(),p(M,null,[e("div",T,[Y,e("div",G,[H,K,e("form",{onSubmit:$(D,["prevent"]),class:"mt-5 flex-1 flex flex-col"},[l(a).type=="basic"?(f(),p("div",J,[L,e("div",Q,[j(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>i.value=o),type:c.value?"text":"password",name:"password",placeholder:"PassW@rd55!*",class:S(["mt-1 border border-[#D2D2D2] focus-visible:outline-[#046A38] py-[14px] px-[15px] rounded-md text-base  w-full",{"border-red-500":u.value.password}])},null,10,X),[[R,i.value]]),e("div",Z,[m(l(I),{onClick:t[1]||(t[1]=o=>c.value=!c.value),active:c.value},null,8,["active"])]),e("p",ee,x(u.value.password),1)])])):q("",!0),e("button",te,x(l(a).type=="basic"?"Proceed with Deletion":"Request to Delete My Account"),1),se,e("button",{type:"button",class:"w-full btn btn-primary-outline text-sm leading-4",onClick:t[2]||(t[2]=o=>s.$router.push({name:"BaseRoute::profile"}))}," Go back to Profile ")],40,O)]),m(l(k),{show:n.value,"onUpdate:show":t[4]||(t[4]=o=>n.value=o),containerClass:"w-[315px] h-auto"},{default:w(()=>[e("div",oe,[e("div",ae,[m(l(F))]),e("div",le,[ne,re,l(a).type=="basic"?(f(),p("span",ie,[g(" Your account will be deleted permanently. Are you sure you "),ue,g(" want to proceed? ")])):(f(),p("span",ce," An email will be sent to Hotel101 for your requests. Are you sure you want to proceed? "))]),e("button",{type:"submit",class:"btn btn-primary mt-5",onClick:A}," Yes, I want to proceed "),e("button",{type:"button",class:"btn btn-primary-outline px-0",onClick:t[3]||(t[3]=o=>n.value=!1)}," No, I don't want to proceed ")])]),_:1},8,["show"])]),m(l(k),{show:d.value,"onUpdate:show":t[5]||(t[5]=o=>d.value=o),containerClass:"w-[300px] h-auto"},{default:w(()=>[e("div",de,[pe,e("div",me,[e("span",null,x(v.value),1)])])]),_:1},8,["show"])],64))}};export{ke as default};
